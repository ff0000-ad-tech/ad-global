!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.adLoad=t():e.adLoad=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";(function(e){function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=function(e){return new i(e)},i=function(){function e(t){o(this,e),this.superclass=t}return e.prototype.with=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)},e}(),l=function(e){return function(e){function t(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];o(this,t);var l=n(this,e.call.apply(e,[this].concat(a))),s=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},c=l;return c.onComplete=s.onComplete||function(){},c.onFail=s.onFail||function(){},c.onProgress=s.onProgress||function(){},c.name=s.name||"",c.scope=s.scope||c,c.dataRaw,c.cacheBuster=s.cacheBuster||!1,c._failCalled=!1,l}return r(t,e),t.prototype._handleFail=function(){var e=this;e._failCalled||(e._failCalled=!0,e.onFail.call(e.scope,e),console.log('Loader "'+e.name+'" Fail:',e.url))},t}(e)};function s(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return alert("XMLHttpRequest not supported"),null}function c(e){var t=e.lastIndexOf("."),n=e.lastIndexOf("/")+1;return n>t&&(t=void 0),e.substring(n,t)}function u(e){var t=(e=e||"").indexOf("?");t>-1&&(e=e.substr(0,t));var n=e.match(/[^\\]*\.(\w+)$/),r=e.match(/image\/(jpeg|jpg|png)/);return n?n[1]:r?r[1]:"unknown"}function p(e){return e?e.replace(/\/?$/,"/"):""}function f(e){if("string"==typeof e)return e;var t="";for(var n in e)console.log("      prop =",n),t+=n+"="+e[n]+"&";return t.substr(0,t.length-1)}var d=Object.freeze({createXMLHttpRequest:s,getFileName:c,getFontName:function(e){return e.substring(e.lastIndexOf("/")+1,e.indexOf("."))},getFileType:u,getFullUrl:function(t,n,r){var o=p(t),a=e.matchProtocolTo(o+_file);return r&&(a=r(a)),url},getUrlPrepend:p,getParamsFromData:f}),h=function(t){return function(t){function a(){for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];o(this,a);var s=n(this,t.call.apply(t,[this].concat(i))),p=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},f=s;return f.url=e.matchProtocolTo(arguments[0]||""),p.platformGetUrl&&(f.platformGetUrl=p.platformGetUrl,f.url=p.platformGetUrl(f.url)),f.fileName=void 0===p.id?c(f.url):p.id,f.fileType=p.fileType||u(f.url),s}return r(a,t),a}(t)},y=function(e){return function(e){function t(){o(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n(this,e.call.apply(e,[this].concat(a)))}return r(t,e),t.prototype._setTicker=function(e){var t=this,n=document.createElement("div");n.innerHTML=e.content,n.style.cssText=e.css||"",document.body.appendChild(n);var r=void 0!=e.width?e.width:n.offsetWidth;n.style.fontFamily=e.font||"";var o=setTimeout(function(){clearInterval(a),t._handleFail()},5e3),a=setInterval(function(){n.offsetWidth!=r&&(clearTimeout(o),clearInterval(a),t._handleTickerComplete(n))},10)},t.prototype._removeTickerNode=function(e){e.parentNode.removeChild(e)},t}(e)},m=function(e){function t(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];o(this,t);var l=n(this,e.call.apply(e,[this].concat(a))),s=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};return l.renderOnly=!!s.renderOnly,l.crossOrigin=s.crossOrigin,l}return r(t,e),t.prototype.load=function(){var e=this;if(e.renderOnly)e._setTicker({content:e.url,width:0});else{var t=new Image;t.id=e.fileName,t.crossOrigin=e.crossOrigin,t.onload=e._handleComplete.bind(e),t.onerror=e._handleFail,t.src=e.url}},t.prototype._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}(a(function e(){o(this,e)}).with(l,h,y)),g=function(e){function t(){o(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n(this,e.call.apply(e,[this].concat(a)))}return r(t,e),t.prototype.load=function(){var e=this,t=void 0;(t="css"==e.fileType?e._createCssLink():"html"==e.fileType?e._createHtmlLink():e._createScript()).charset="utf-8",t.onload=e._handleComplete.bind(e),t.onerror=e._handleFail,"css"==e.fileType||"html"==e.fileType?t.href=this.url:t.src=e.url,document.getElementsByTagName("head")[0].appendChild(t)},t.prototype._createCssLink=function(){var e=document.createElement("link");return e.rel="stylesheet",e.type="text/css",e},t.prototype._createHtmlLink=function(){var e=document.createElement("link");return e.rel="import",e},t.prototype._createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e},t.prototype._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}(a(function e(){o(this,e)}).with(l,h)),v=function(e){function t(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];o(this,t);var l=n(this,e.call.apply(e,[this].concat(a))),s=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},c=l;return c.method=(s.method||"get").toLowerCase(),c.query=s.query||null,c.responseType=s.responseType||null,l}return r(t,e),t.prototype.load=function(){var e=this,t=null,n="post"===e.method;e.req=s(),void 0!=e.responseType&&(e.req.responseType=e.responseType);var r=e.url;switch(e.query&&(t=f(e.query),n||(r+="?"+t,t=null)),e.cacheBuster&&(r+=e.query&&!n?"&":"?",r+="cb="+(new Date).getTime()),e.req.onreadystatechange=e._handleStateChange.bind(e),e.req.open(e.method,r,!0),e.fileType){case"xml":e.req.overrideMimeType&&e.req.overrideMimeType("text/xml");break;case"json":e.req.overrideMimeType&&e.req.overrideMimeType("application/json");break;case"fba":case"bin":case"binary":e.responseType=e.req.responseType="arraybuffer"}"post"===e.method&&e.req.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.req.send(t)},t.prototype._handleStateChange=function(e){var t=this;switch(t.req.readyState){case 3:200==this.req.status&&(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleProgress(t));break;case 4:200==t.req.status?(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleComplete(t)):t._handleFail({target:e})}},t.prototype._handleProgress=function(){var e=this;e.onProgress.call(e.scope,e)},t.prototype._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}(a(function e(){o(this,e)}).with(l,h)),_=function(e){function t(){o(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n(this,e.call.apply(e,[this].concat(a)))}return r(t,e),t.prototype.load=function(){var e=this;e.fileName=e.fileName.split(".")[0];var t="@font-face { font-family: "+e.fileName+"; src: url("+e.url+") format('truetype'); }",n=document.getElementById("RED_fontStyleSheet");if(n)n.innerHTML+=t;else{var r=document.createElement("style");r.type="text/css",r.media="screen",r.id="RED_fontStyleSheet",r.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(r)}e._setTicker({content:" !\"\\#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",css:"position:absolute; top:-1000px; font-size:100px; font-family:san-serif; font-variant:normal; font-style:normal; font-weight:normal; letter-spacing:0; white-space:nowrap;",font:e.fileName})},t.prototype._handleTickerComplete=function(e){var t=this;setTimeout(function(){t._removeTickerNode(e)},300),t._handleComplete()},t.prototype._handleComplete=function(e){var t=this;t.dataRaw=t.fileName,t.onComplete.call(t.scope,t)},t}(a(function e(){o(this,e)}).with(l,h,y)),w=function(e){function t(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];o(this,t);var l=n(this,e.call.apply(e,[this].concat(a))),s=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},c=l;return c._queue={},c._total=0,c._active=!1,c._startedCount=0,c.prepend=s.prepend||"",c.platformGetUrl=s.platformGetUrl,c.fileType=s.fileType||null,c.content=[],c.crossOrigin=s.crossOrigin||void 0,c.add(arguments[0]),l}return r(t,e),t.prototype.add=function(e){var n=this;if("string"==typeof e)n._addSingleLoad(e);else if(e instanceof Array)for(var r=0;r<e.length;r++)n._addSingleLoad(e[r]);else e instanceof t&&(e.content&&e.content[0]&&"fba"==e.content[0].fileType?n._addFbaSubLoads(e.content[0]):n._addSubLoad(e))},t.prototype.load=function(){var e=this;if(e._active=!0,e._total<=0)console.log('Loader "'+e.name+'" has NO assets to be loaded.');else{var n=!1,r="";for(var o in e._queue)if(!(e._queue[o]instanceof t)){n||(n=!0,r+='Loader "'+e.name+'" requesting:');var a=e._queue[o].fileName,i=e._queue[o].fileType,l=a.indexOf("."+i)>-1?a:a+"."+i;r+="\n\t -> "+(e._queue[o].prepend||"")+l}n&&console.log(r)}e._startSingleLoad(0)},t.prototype.getAllContent=function(){var e=[];return function n(r){for(var o=0;o<r.length;o++)r[o]instanceof t?n(r[o].content):e.push(r[o])}(this.content),e.length<1&&console.log("No Content found"),e},t.prototype.getAllContentRaw=function(){for(var e=this.getAllContent(),t=0;t<e.length;t++)e[t]=e[t].dataRaw;return e},t.prototype.getLoader=function(e){var n=null;return function r(o){for(var a=0;a<o.length;a++)o[a]instanceof t&&(!o[a]||o[a].name!==e&&o[a]!==e?r(o[a].content):n=o[a])}(this.content),n||console.log("No Loader found of that name"),n},t.prototype._addSingleLoad=function(e,t){var n=this,r=t?t[1]:n.fileType||u(e),o=void 0;switch(r){case"jpg":case"jpeg":case"gif":case"png":case"svg":o=m;break;case"ttf":case"woff":o=_;break;case"json":case"fba":case"bin":case"binary":o=v;break;default:o=g}var a=new o(t?e:n.prepend+e,{scope:n,platformGetUrl:n.platformGetUrl,onComplete:n._handleSingleLoadComplete,onFail:n._handleFail,fileType:r,cacheBuster:n.cacheBuster,crossOrigin:n.crossOrigin});t&&(a.fileName=t[0]),a.queueIndex=n._total,n._queue[n._total]=a,n._total++},t.prototype._addSubLoad=function(e){var t=this;e.onComplete=t._handleSingleLoadComplete.bind(t),e.onProgress=t._handleProgress.bind(t),e.onFail=t._handleFail,e.queueIndex=t._total,t._queue[t._total]=e,t._total++},t.prototype._addFbaSubLoads=function(e){var t=new Uint8Array(4),n=new Uint32Array(t.buffer),r=44,o=new Uint8Array(e.dataRaw,r,1)[0];r+=5;for(var a=0;a<o;a++){for(var i=new Uint8Array(e.dataRaw,r,4),l=4,s=0;s<4;s++)t[--l]=i[s];var c=n[0];r+=7;var u=String.fromCharCode(new Uint8Array(e.dataRaw,r++,1)),p=new Uint8Array(e.dataRaw,r+3,1)[0]||0,f=new Uint8Array(e.dataRaw,r+4,p),d=String.fromCharCode.apply(String,f);p+=4;var h=new Uint8Array(e.dataRaw,r+p,c-p);r+=c+4;var y=d.split("."),m="f"==u?"application/x-font-ttf":"image/"+("svg"==y[1]?"svg+xml":y[1]),g=new Blob([h],{type:m}),v=URL.createObjectURL(g);this._addSingleLoad(v,y)}},t.prototype._startSingleLoad=function(e){var n=this,r=n._queue[e];0==n._total?n._handleComplete():e<n._total&&(r instanceof t||e<n._total-1&&n._startLoadTimeOut(++e),r.load())},t.prototype._startLoadTimeOut=function(e){var t=this;setTimeout(function(){t._startSingleLoad(e)},10)},t.prototype._handleSingleLoadComplete=function(e){var t=this;t.content[e.queueIndex]=e,delete t._queue[e.queueIndex],t._handleProgress(),void 0==e.url&&e.queueIndex<t._total-1&&t._startLoadTimeOut(e.queueIndex+1)},t.prototype._handleProgress=function(){for(var e=this,t=e.content.length,n=0,r=0;r<t;r++)e.content[r]&&n++;var o=n,a=0;n<e._total&&e._queue[n]&&(a=e._queue[n].progress/e._total||0),e.progress=o/e._total+a,e.rawProgress=n/e._total+a,e.onProgress.call(e.scope,e),n>=e._total&&e._handleComplete()},t.prototype._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}(a(function e(){o(this,e)}).with(l));t.LoaderUtils=d,t.ImageLoader=m,t.InlineLoader=g,t.DataLoader=v,t.FontLoader=_,t.default=w}).call(t,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])});